{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _keys2 = require('lodash/keys');\n\nvar _keys3 = _interopRequireDefault(_keys2);\n\nvar _omit2 = require('lodash/omit');\n\nvar _omit3 = _interopRequireDefault(_omit2);\n\nvar _first2 = require('lodash/first');\n\nvar _first3 = _interopRequireDefault(_first2);\n\nvar _pick2 = require('lodash/pick');\n\nvar _pick3 = _interopRequireDefault(_pick2);\n\nvar _values2 = require('lodash/values');\n\nvar _values3 = _interopRequireDefault(_values2);\n\nvar _flatten2 = require('lodash/flatten');\n\nvar _flatten3 = _interopRequireDefault(_flatten2);\n\nvar _castArray2 = require('lodash/castArray');\n\nvar _castArray3 = _interopRequireDefault(_castArray2);\n\nvar _isUndefined2 = require('lodash/isUndefined');\n\nvar _isUndefined3 = _interopRequireDefault(_isUndefined2);\n\nvar _isPlainObject2 = require('lodash/isPlainObject');\n\nvar _isPlainObject3 = _interopRequireDefault(_isPlainObject2);\n\nvar _reduce2 = require('lodash/reduce');\n\nvar _reduce3 = _interopRequireDefault(_reduce2);\n\nvar _reject2 = require('lodash/reject');\n\nvar _reject3 = _interopRequireDefault(_reject2);\n\nvar _includes2 = require('lodash/includes');\n\nvar _includes3 = _interopRequireDefault(_includes2);\n\nvar _filter2 = require('lodash/filter');\n\nvar _filter3 = _interopRequireDefault(_filter2);\n\nvar _mapValues2 = require('lodash/mapValues');\n\nvar _mapValues3 = _interopRequireDefault(_mapValues2);\n\nvar _assign2 = require('lodash/assign');\n\nvar _assign3 = _interopRequireDefault(_assign2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.createClass = createClass;\nexports.filterTypes = filterTypes;\nexports.rejectTypes = rejectTypes;\nexports.createElements = createElements;\nexports.findTypes = findTypes;\nexports.getFirst = getFirst;\nexports.omitProps = omitProps;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _createReactClass = require('create-react-class');\n\nvar _createReactClass2 = _interopRequireDefault(_createReactClass);\n\nvar _propTypes = require('react-peek/prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _stateManagement = require('./state-management');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n} // creates a React component\n\n\nfunction createClass() {\n  var definition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _definition$_isPrivat = definition._isPrivate,\n      _isPrivate = _definition$_isPrivat === undefined ? false : _definition$_isPrivat,\n      getDefaultProps = definition.getDefaultProps,\n      _definition$statics = definition.statics,\n      statics = _definition$statics === undefined ? {} : _definition$statics,\n      _definition$component = definition.components,\n      components = _definition$component === undefined ? {} : _definition$component,\n      _definition$reducers = definition.reducers,\n      reducers = _definition$reducers === undefined ? {} : _definition$reducers,\n      _definition$selectors = definition.selectors,\n      selectors = _definition$selectors === undefined ? {} : _definition$selectors,\n      _definition$initialSt = definition.initialState,\n      initialState = _definition$initialSt === undefined ? getDefaultProps && (0, _stateManagement.omitFunctionPropsDeep)(getDefaultProps.apply(definition)) : _definition$initialSt,\n      _definition$propName = definition.propName,\n      propName = _definition$propName === undefined ? null : _definition$propName,\n      _definition$propTypes = definition.propTypes,\n      propTypes = _definition$propTypes === undefined ? {} : _definition$propTypes,\n      _definition$render = definition.render,\n      render = _definition$render === undefined ? function () {\n    return null;\n  } : _definition$render,\n      restDefinition = _objectWithoutProperties(definition, ['_isPrivate', 'getDefaultProps', 'statics', 'components', 'reducers', 'selectors', 'initialState', 'propName', 'propTypes', 'render']);\n\n  var newDefinition = _extends({\n    getDefaultProps: getDefaultProps\n  }, restDefinition, {\n    statics: _extends({}, statics, components, {\n      _isPrivate: _isPrivate,\n      reducers: reducers,\n      selectors: selectors,\n      initialState: initialState,\n      propName: propName\n    }),\n    propTypes: (0, _assign3.default)({}, propTypes, (0, _mapValues3.default)(definition.components, function (componentValue, componentKey) {\n      return _propTypes2.default.any;\n    })),\n    render: render\n  });\n\n  newDefinition.statics.definition = newDefinition;\n  return (0, _createReactClass2.default)(newDefinition);\n} // return all elements matching the specified types\n\n\nfunction filterTypes(children) {\n  var types = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  types = [].concat(types); // coerce to Array\n\n  return (0, _filter3.default)(_react2.default.Children.toArray(children), function (element) {\n    return _react2.default.isValidElement(element) && (0, _includes3.default)(types, element.type);\n  });\n} // return all elements not matching the specified types\n\n\nfunction rejectTypes(children) {\n  var types = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  types = [].concat(types); // coerce to Array\n\n  return (0, _reject3.default)(_react2.default.Children.toArray(children), function (element) {\n    return _react2.default.isValidElement(element) && (0, _includes3.default)(types, element.type);\n  });\n} // return an array of elements (of the given type) for each of the values\n\n\nfunction createElements(type) {\n  var values = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return (0, _reduce3.default)([].concat(values), function (elements, typeValue) {\n    if (_react2.default.isValidElement(typeValue) && typeValue.type === type) {\n      return elements.concat(typeValue);\n    } else if ((0, _isPlainObject3.default)(typeValue) && !_react2.default.isValidElement(typeValue)) {\n      return elements.concat(_react2.default.createElement(type, typeValue));\n    } else if ((0, _isUndefined3.default)(typeValue)) {\n      return elements;\n    } else {\n      return elements.concat(_react2.default.createElement(type, null, typeValue));\n    }\n  }, []);\n} // return all elements found in props and children of the specified types\n\n\nfunction findTypes(props) {\n  var types = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : []; // get elements from props (using type.propName)\n\n  var elementsFromProps = (0, _reduce3.default)((0, _castArray3.default)(types), function (acc, type) {\n    if (!(0, _isUndefined3.default)(type.propName)) {\n      var propMatches = (0, _flatten3.default)((0, _values3.default)((0, _pick3.default)(props, type.propName)));\n      return acc.concat(createElements(type, propMatches));\n    }\n\n    return acc;\n  }, []); // return elements from props and elements from children\n\n  return elementsFromProps.concat(filterTypes(props.children, types));\n} // return the first element found in props and children of the specificed type(s)\n\n\nfunction getFirst(props, types, defaultValue) {\n  return (0, _first3.default)(findTypes(props, types)) || defaultValue;\n} // Omit props defined in propTypes of the given type and any extra keys given\n// in third argument\n//\n// We also have a \"magic\" prop that's always excluded called `callbackId`. That\n// prop can be used to identify a component in a list without having to create\n// extra closures.\n\n\nfunction omitProps(props, type) {\n  var keys = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var targetIsDOMElement = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true; // We only want to exclude the `callbackId` key when we're omitting props\n  // destined for a dom element\n\n  var additionalOmittedKeys = targetIsDOMElement ? ['initialState', 'callbackId'] : ['initialState'];\n  return (0, _omit3.default)(props, (0, _keys3.default)(type.propTypes).concat(keys).concat(additionalOmittedKeys));\n}","map":null,"metadata":{},"sourceType":"script"}
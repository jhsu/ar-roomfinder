{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _times2 = require('lodash/times');\n\nvar _times3 = _interopRequireDefault(_times2);\n\nvar _toString2 = require('lodash/toString');\n\nvar _toString3 = _interopRequireDefault(_toString2);\n\nvar _pick2 = require('lodash/pick');\n\nvar _pick3 = _interopRequireDefault(_pick2);\n\nvar _isNull2 = require('lodash/isNull');\n\nvar _isNull3 = _interopRequireDefault(_isNull2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _partial2 = require('lodash/partial');\n\nvar _partial3 = _interopRequireDefault(_partial2);\n\nvar _omit2 = require('lodash/omit');\n\nvar _omit3 = _interopRequireDefault(_omit2);\n\nvar _every2 = require('lodash/every');\n\nvar _every3 = _interopRequireDefault(_every2);\n\nvar _isEmpty2 = require('lodash/isEmpty');\n\nvar _isEmpty3 = _interopRequireDefault(_isEmpty2);\n\nvar _size2 = require('lodash/size');\n\nvar _size3 = _interopRequireDefault(_size2);\n\nvar _clamp2 = require('lodash/clamp');\n\nvar _clamp3 = _interopRequireDefault(_clamp2);\n\nvar _some2 = require('lodash/some');\n\nvar _some3 = _interopRequireDefault(_some2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _reduce2 = require('lodash/reduce');\n\nvar _reduce3 = _interopRequireDefault(_reduce2);\n\nvar _noop2 = require('lodash/noop');\n\nvar _noop3 = _interopRequireDefault(_noop2);\n\nvar _isNil2 = require('lodash/isNil');\n\nvar _isNil3 = _interopRequireDefault(_isNil2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('react-peek/prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _styleHelpers = require('../../util/style-helpers');\n\nvar _componentTypes = require('../../util/component-types');\n\nvar _Checkbox = require('../Checkbox/Checkbox');\n\nvar _Checkbox2 = _interopRequireDefault(_Checkbox);\n\nvar _EmptyStateWrapper = require('../EmptyStateWrapper/EmptyStateWrapper');\n\nvar _EmptyStateWrapper2 = _interopRequireDefault(_EmptyStateWrapper);\n\nvar _ScrollTable = require('../ScrollTable/ScrollTable');\n\nvar _ScrollTable2 = _interopRequireDefault(_ScrollTable);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar Thead = _ScrollTable2.default.Thead,\n    Tbody = _ScrollTable2.default.Tbody,\n    Tr = _ScrollTable2.default.Tr,\n    Th = _ScrollTable2.default.Th,\n    Td = _ScrollTable2.default.Td;\n\nvar cx = _styleHelpers.lucidClassNames.bind('&-DataTable');\n\nvar any = _propTypes2.default.any,\n    func = _propTypes2.default.func,\n    number = _propTypes2.default.number,\n    object = _propTypes2.default.object,\n    string = _propTypes2.default.string,\n    bool = _propTypes2.default.bool,\n    arrayOf = _propTypes2.default.arrayOf;\nvar DataTable = (0, _componentTypes.createClass)({\n  displayName: 'DataTable',\n  statics: {\n    shouldColumnHandleSort: function shouldColumnHandleSort(column) {\n      return (0, _isNil3.default)(column.isSortable) ? column.isSorted : column.isSortable;\n    }\n  },\n  propTypes: {\n    className: string,\n    data: arrayOf(object),\n    emptyCellText: string,\n    isActionable: bool,\n    isFullWidth: bool,\n    isLoading: bool,\n    isSelectable: bool,\n    style: object,\n    minRows: number,\n    onRowClick: func,\n    onSelect: func,\n    onSelectAll: func,\n    onSort: func,\n    Column: any,\n    ColumnGroup: any\n  },\n  getDefaultProps: function getDefaultProps() {\n    return {\n      emptyCellText: '--',\n      isActionable: false,\n      isSelectable: false,\n      onRowClick: _noop3.default,\n      onSelect: _noop3.default,\n      onSelectAll: _noop3.default,\n      onSort: _noop3.default,\n      minRows: 10\n    };\n  },\n  components: {\n    Column: (0, _componentTypes.createClass)({\n      displayName: 'DataTable.Column',\n      statics: {},\n      propName: 'Column',\n      propTypes: {\n        field: string.isRequired,\n        title: string\n      }\n    }),\n    ColumnGroup: (0, _componentTypes.createClass)({\n      displayName: 'DataTable.ColumnGroup',\n      statics: {},\n      propName: 'ColumnGroup',\n      propTypes: {\n        title: string\n      },\n      getDefaultProps: function getDefaultProps() {\n        return {\n          align: 'center'\n        };\n      }\n    }),\n    EmptyStateWrapper: _EmptyStateWrapper2.default\n  },\n  handleSelect: function handleSelect(rowIndex, _ref) {\n    var event = _ref.event;\n    var _props = this.props,\n        data = _props.data,\n        onSelect = _props.onSelect;\n    onSelect(data[rowIndex], rowIndex, {\n      props: this.props,\n      event: event\n    });\n  },\n  handleSelectAll: function handleSelectAll(_ref2) {\n    var event = _ref2.event;\n    var onSelectAll = this.props.onSelectAll;\n    onSelectAll({\n      props: this.props,\n      event: event\n    });\n  },\n  handleRowClick: function handleRowClick(rowIndex, event) {\n    var _props2 = this.props,\n        data = _props2.data,\n        onRowClick = _props2.onRowClick;\n    var targetTagName = event.target.tagName.toLowerCase();\n\n    if (targetTagName === 'td' || targetTagName === 'tr') {\n      onRowClick(data[rowIndex], rowIndex, {\n        props: this.props,\n        event: event\n      });\n    }\n  },\n  handleSort: function handleSort(field, event) {\n    var onSort = this.props.onSort;\n    event.stopPropagation();\n    event.preventDefault();\n    event.bubbles = false;\n    onSort(field, {\n      props: this.props,\n      event: event\n    });\n  },\n  render: function render() {\n    var _this = this;\n\n    var _props3 = this.props,\n        className = _props3.className,\n        data = _props3.data,\n        emptyCellText = _props3.emptyCellText,\n        isActionable = _props3.isActionable,\n        isFullWidth = _props3.isFullWidth,\n        isLoading = _props3.isLoading,\n        isSelectable = _props3.isSelectable,\n        style = _props3.style,\n        minRows = _props3.minRows,\n        passThroughs = _objectWithoutProperties(_props3, ['className', 'data', 'emptyCellText', 'isActionable', 'isFullWidth', 'isLoading', 'isSelectable', 'style', 'minRows']);\n\n    var childComponentElements = (0, _componentTypes.findTypes)(this.props, [DataTable.Column, DataTable.ColumnGroup]);\n    var flattenedColumns = (0, _reduce3.default)(childComponentElements, function (acc, childComponentElement) {\n      if (childComponentElement.type === DataTable.Column) {\n        return acc.concat([{\n          props: childComponentElement.props,\n          columnGroupProps: null\n        }]);\n      }\n\n      if (childComponentElement.type === DataTable.ColumnGroup) {\n        return acc.concat((0, _map3.default)((0, _componentTypes.findTypes)(childComponentElement.props, DataTable.Column), function (columnChildComponent) {\n          return {\n            props: columnChildComponent.props,\n            columnGroupProps: childComponentElement.props\n          };\n        }));\n      }\n    }, []);\n    var hasGroupedColumns = (0, _some3.default)(childComponentElements, function (childComponentElement) {\n      return childComponentElement.type === DataTable.ColumnGroup;\n    });\n\n    var emptyStateWrapper = (0, _componentTypes.getFirst)(this.props, DataTable.EmptyStateWrapper) || _react2.default.createElement(DataTable.EmptyStateWrapper, {\n      Title: 'No items found.',\n      Body: 'Try creating a new object or removing a filter.'\n    });\n\n    var fillerRowCount = (0, _clamp3.default)(minRows - (0, _size3.default)(data), 0, Infinity);\n    return _react2.default.createElement(_EmptyStateWrapper2.default, _extends({}, emptyStateWrapper.props, {\n      isEmpty: (0, _isEmpty3.default)(data),\n      isLoading: isLoading\n    }), emptyStateWrapper.props.children, _react2.default.createElement(_ScrollTable2.default, _extends({\n      style: style,\n      tableWidth: isFullWidth ? '100%' : null\n    }, (0, _componentTypes.omitProps)(passThroughs, DataTable, [], false), {\n      className: cx('&', {\n        '&-full-width': isFullWidth\n      }, className)\n    }), _react2.default.createElement(Thead, null, _react2.default.createElement(Tr, null, isSelectable ? _react2.default.createElement(Th, {\n      rowSpan: hasGroupedColumns ? 2 : null,\n      width: 24\n    }, _react2.default.createElement(_Checkbox2.default, {\n      isSelected: (0, _every3.default)(data, 'isSelected'),\n      onSelect: this.handleSelectAll\n    })) : null, (0, _map3.default)(childComponentElements, function (_ref3, index) {\n      var props = _ref3.props,\n          type = _ref3.type;\n      return type === DataTable.Column ? _react2.default.createElement(Th, _extends({}, (0, _omit3.default)(props, ['field', 'children', 'width', 'title']), {\n        onClick: DataTable.shouldColumnHandleSort(props) ? (0, _partial3.default)(_this.handleSort, props.field) : null,\n        style: {\n          width: props.width\n        },\n        rowSpan: hasGroupedColumns ? 2 : null,\n        key: (0, _get3.default)(props, 'field', index)\n      }), props.title || props.children) : _react2.default.createElement(Th, _extends({\n        colSpan: (0, _size3.default)((0, _componentTypes.filterTypes)(props.children, DataTable.Column))\n      }, (0, _omit3.default)(props, ['field', 'children', 'width', 'title']), {\n        key: (0, _get3.default)(props, 'field', index)\n      }), props.title || props.children);\n    })), hasGroupedColumns ? _react2.default.createElement(Tr, null, (0, _reduce3.default)(flattenedColumns, function (acc, _ref4, index) {\n      var columnProps = _ref4.props,\n          columnGroupProps = _ref4.columnGroupProps;\n      return acc.concat((0, _isNull3.default)(columnGroupProps) ? [] : [_react2.default.createElement(Th, _extends({}, (0, _componentTypes.omitProps)(columnProps, DataTable.Column, [], false), {\n        onClick: DataTable.shouldColumnHandleSort(columnProps) ? (0, _partial3.default)(_this.handleSort, columnProps.field) : null,\n        style: {\n          width: columnProps.width\n        },\n        key: (0, _get3.default)(columnProps, 'field', index)\n      }), columnProps.title || columnProps.children)]);\n    }, [])) : null), _react2.default.createElement(Tbody, null, (0, _map3.default)(data, function (row, index) {\n      return _react2.default.createElement(Tr, _extends({}, (0, _pick3.default)(row, ['isDisabled', 'isActive', 'isSelected']), {\n        onClick: (0, _partial3.default)(_this.handleRowClick, index),\n        isActionable: isActionable,\n        key: 'row' + index\n      }), isSelectable ? _react2.default.createElement(Td, null, _react2.default.createElement(_Checkbox2.default, {\n        isSelected: row.isSelected,\n        onSelect: (0, _partial3.default)(_this.handleSelect, index)\n      })) : null, (0, _map3.default)(flattenedColumns, function (_ref5, columnIndex) {\n        var columnProps = _ref5.props;\n        var cellValue = (0, _get3.default)(row, columnProps.field);\n        var isEmpty = (0, _isEmpty3.default)((0, _toString3.default)(cellValue));\n        return _react2.default.createElement(Td, _extends({}, (0, _omit3.default)(columnProps, ['field', 'children', 'width', 'title', 'isSortable', 'isSorted', 'isResizable']), {\n          style: {\n            width: columnProps.width\n          },\n          key: 'row' + index + (0, _get3.default)(columnProps, 'field', columnIndex)\n        }), isEmpty ? emptyCellText : cellValue);\n      }));\n    }), (0, _times3.default)(fillerRowCount, function (index) {\n      return _react2.default.createElement(Tr, {\n        isDisabled: true,\n        key: 'row' + index,\n        style: {\n          height: '32px'\n        }\n      }, isSelectable ? _react2.default.createElement(Td, null) : null, (0, _map3.default)(flattenedColumns, function (_ref6, columnIndex) {\n        var columnProps = _ref6.props;\n        return _react2.default.createElement(Td, _extends({}, (0, _omit3.default)(columnProps, ['field', 'children', 'width', 'title', 'isSortable', 'isSorted', 'isResizable']), {\n          style: {\n            width: columnProps.width\n          },\n          key: 'row' + index + (0, _get3.default)(columnProps, 'field', columnIndex)\n        }));\n      }));\n    }))));\n  }\n});\nexports.default = DataTable;","map":null,"metadata":{},"sourceType":"script"}
{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _identity2 = require('lodash/identity');\n\nvar _identity3 = _interopRequireDefault(_identity2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('react-peek/prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _styleHelpers = require('../../util/style-helpers');\n\nvar _chartHelpers = require('../../util/chart-helpers');\n\nvar _componentTypes = require('../../util/component-types');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar cx = _styleHelpers.lucidClassNames.bind('&-Axis');\n\nvar string = _propTypes2.default.string,\n    array = _propTypes2.default.array,\n    func = _propTypes2.default.func,\n    number = _propTypes2.default.number,\n    oneOf = _propTypes2.default.oneOf;\nvar Axis = (0, _componentTypes.createClass)({\n  displayName: 'Axis',\n  statics: {},\n  propTypes: {\n    className: string,\n    scale: func.isRequired,\n    innerTickSize: number,\n    outerTickSize: number,\n    tickFormat: func,\n    ticks: array,\n    tickPadding: number,\n    orient: oneOf(['top', 'bottom', 'left', 'right']),\n    tickCount: number,\n    textOrientation: oneOf(['vertical', 'horizontal', 'diagonal'])\n  },\n  getDefaultProps: function getDefaultProps() {\n    return {\n      innerTickSize: 6,\n      // same as d3\n      outerTickSize: 6,\n      // same as d3\n      tickPadding: 3,\n      // same as d3\n      textOrientation: 'horizontal',\n      orient: 'bottom',\n      tickCount: null\n    };\n  },\n  render: function render() {\n    var _props = this.props,\n        scale = _props.scale,\n        className = _props.className,\n        orient = _props.orient,\n        tickCount = _props.tickCount,\n        _props$ticks = _props.ticks,\n        ticks = _props$ticks === undefined ? scale.ticks ? scale.ticks(tickCount) : (0, _chartHelpers.discreteTicks)(scale.domain(), tickCount) : _props$ticks,\n        innerTickSize = _props.innerTickSize,\n        outerTickSize = _props.outerTickSize,\n        _props$tickFormat = _props.tickFormat,\n        tickFormat = _props$tickFormat === undefined ? scale.tickFormat ? scale.tickFormat() : _identity3.default : _props$tickFormat,\n        tickPadding = _props.tickPadding,\n        textOrientation = _props.textOrientation,\n        passThroughs = _objectWithoutProperties(_props, ['scale', 'className', 'orient', 'tickCount', 'ticks', 'innerTickSize', 'outerTickSize', 'tickFormat', 'tickPadding', 'textOrientation']);\n\n    var tickSpacing = Math.max(innerTickSize, 0) + tickPadding; // Domain\n\n    var range = scale.range();\n    var sign = orient === 'top' || orient === 'left' ? -1 : 1;\n    var isH = orient === 'top' || orient === 'bottom'; // is horizontal\n\n    var getOrientationProperties = function getOrientationProperties(orient, textOrientation) {\n      var textAnchor = void 0,\n          x = void 0,\n          y = void 0,\n          dy = void 0;\n      var orientationSign = sign;\n\n      switch (orient) {\n        case 'bottom':\n          if (textOrientation === 'vertical') {\n            orientationSign = -orientationSign;\n          }\n\n          textAnchor = textOrientation === 'vertical' ? 'end' : textOrientation === 'diagonal' ? 'end' : 'middle';\n          x = textOrientation === 'vertical' ? orientationSign * tickSpacing : textOrientation === 'diagonal' ? -orientationSign * tickSpacing : 0;\n          y = textOrientation === 'vertical' ? 0 : orientationSign * tickSpacing;\n          dy = textOrientation === 'vertical' ? '.32em' : '.71em';\n          break;\n\n        case 'top':\n          if (textOrientation === 'vertical') {\n            orientationSign = -orientationSign;\n          }\n\n          textAnchor = textOrientation === 'vertical' ? 'start' : textOrientation === 'diagonal' ? 'start' : 'middle';\n          x = textOrientation === 'vertical' || textOrientation === 'diagonal' ? -orientationSign * tickSpacing : 0;\n          y = textOrientation === 'vertical' ? 0 : orientationSign * tickSpacing;\n          dy = textOrientation === 'vertical' || textOrientation === 'diagonal' ? '.32em' : '0em';\n          break;\n\n        case 'right':\n          textAnchor = textOrientation === 'vertical' ? 'middle' : 'start';\n          x = textOrientation === 'vertical' ? 0 : orientationSign * tickSpacing;\n          y = textOrientation === 'vertical' ? orientationSign * tickSpacing : textOrientation === 'horizontal' ? 0 : orientationSign * tickSpacing;\n          dy = textOrientation === 'vertical' ? '.71em' : '.32em';\n          break;\n\n        case 'left':\n          textAnchor = textOrientation === 'vertical' ? 'middle' : 'end';\n          x = textOrientation === 'vertical' ? 0 : orientationSign * tickSpacing;\n          y = textOrientation === 'vertical' || textOrientation === 'diagonal' ? orientationSign * tickSpacing : 0;\n          dy = textOrientation === 'vertical' ? '0em' : textOrientation === 'horizontal' ? '.32em' : '.71em';\n          break;\n      }\n\n      return {\n        transform: textOrientation === 'vertical' ? 'rotate(-90)' : textOrientation === 'horizontal' ? '' : 'rotate(-30)',\n        textAnchor: textAnchor,\n        x: x,\n        y: y,\n        dy: dy\n      };\n    };\n\n    var orientationProperties = {\n      vertical: getOrientationProperties(orient, 'vertical'),\n      horizontal: getOrientationProperties(orient, 'horizontal'),\n      diagonal: getOrientationProperties(orient, 'diagonal')\n    };\n    var orientationKey = textOrientation || 'horizontal';\n    var scaleNormalized = scale; // Only band scales have `bandwidth`, this conditional helps center the\n    // ticks on the bands\n\n    if (scale.bandwidth) {\n      var bandModifier = scale.bandwidth() / 2;\n\n      scaleNormalized = function scaleNormalized(d) {\n        return scale(d) + bandModifier;\n      };\n    }\n\n    return _react2.default.createElement('g', _extends({}, (0, _componentTypes.omitProps)(passThroughs, Axis), {\n      className: cx(className, '&')\n    }), isH ? _react2.default.createElement('path', {\n      className: cx('&-domain'),\n      d: 'M' + range[0] + ',' + sign * outerTickSize + 'V0H' + range[1] + 'V' + sign * outerTickSize\n    }) : _react2.default.createElement('path', {\n      className: cx('&-domain'),\n      d: 'M' + sign * outerTickSize + ',' + range[0] + 'H0V' + range[1] + 'H' + sign * outerTickSize\n    }), (0, _map3.default)(ticks, function (tick) {\n      return _react2.default.createElement('g', {\n        key: tick,\n        transform: 'translate(' + (isH ? scaleNormalized(tick) : 0) + ', ' + (isH ? 0 : scaleNormalized(tick)) + ')'\n      }, _react2.default.createElement('line', {\n        className: cx('&-tick'),\n        x2: isH ? 0 : sign * innerTickSize,\n        y2: isH ? sign * innerTickSize : 0\n      }), _react2.default.createElement('text', {\n        className: cx('&-tick-text'),\n        x: orientationProperties[orientationKey].x,\n        y: orientationProperties[orientationKey].y,\n        dy: orientationProperties[orientationKey].dy,\n        style: {\n          textAnchor: orientationProperties[orientationKey].textAnchor\n        },\n        transform: orientationProperties[orientationKey].transform\n      }, tickFormat(tick)));\n    }));\n  }\n});\nexports.default = Axis;","map":null,"metadata":{},"sourceType":"script"}